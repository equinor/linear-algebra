<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">test/vector.spec.js | @kjerandp/linear-algebra</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Math library for doing basic linear algebra operations"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@kjerandp/linear-algebra"><meta property="twitter:description" content="Math library for doing basic linear algebra operations"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/kjerandp/linear-algebra"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/matrix.js~Matrix.html">Matrix</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/vector.js~Vector.html">Vector</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-add">add</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addAll">addAll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addScaled">addScaled</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-angle">angle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-angle2">angle2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clamp">clamp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clampArray">clampArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clampValue">clampValue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cross">cross</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cross2">cross2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deg">deg</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-descr">descr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-dir">dir</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-dist">dist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-dot">dot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-lerp">lerp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mix">mix</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-norm">norm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nrad">nrad</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-orth2">orth2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rad">rad</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-round">round</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-scalar">scalar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-scale">scale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-seq">seq</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-smoothstep">smoothstep</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-step">step</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stepArray">stepArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stepValue">stepValue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sub">sub</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-subAll">subAll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-subScaled">subScaled</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sumsqr">sumsqr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-triple">triple</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-vec">vec</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mat">mat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mat2">mat2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mat3">mat3</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mat4">mat4</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-flattenList">flattenList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rowsToColumns">rowsToColumns</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nvec">nvec</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-vec2">vec2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-vec3">vec3</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-vec4">vec4</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DEG2RAD">DEG2RAD</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EPSILON">EPSILON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PI">PI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-QPI">QPI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RAD2DEG">RAD2DEG</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SPI">SPI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TAU">TAU</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">test/vector.spec.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import expect from &apos;expect&apos;;
import { Vector, nvec, vec2, vec3, vec4 } from &apos;../src/vector&apos;;


describe(&apos;vector.js&apos;, () =&gt; {
  it(&apos;should be possible to instantiate and assign values using factory functions&apos;, () =&gt; {
    expect(vec3()).toEqual([0, 0, 0]);
    expect(vec4(1)).toEqual([1, 1, 1, 1]);
    expect(vec3(vec2(1, 2), 3)).toEqual([1, 2, 3]);
    expect(nvec(10)).toEqual([0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
    const vectorFromArray = Vector.fromArray([1, 2, 3, 4]);
    expect(vectorFromArray).toEqual([1, 2, 3, 4]);
    expect(vectorFromArray).toBeInstanceOf(Vector);
    expect(vectorFromArray).toBeInstanceOf(Array);
    expect(new Vector(4)).toEqual(new Array(4));
  });

  it(&apos;should be able to use array getters/setters and extended/added vector getter/setters&apos;, () =&gt; {
    const v = vec4(1, 2, 3, 4);

    expect(v[0]).toBe(1);
    expect(v[1]).toBe(2);
    expect(v[2]).toBe(3);
    expect(v[3]).toBe(4);

    expect(v.length).toBe(4);

    // coordinates
    expect(v.x).toBe(v[0]);
    expect(v.y).toBe(v[1]);
    expect(v.z).toBe(v[2]);
    expect(v.w).toBe(v[3]);

    // rgba
    expect(v.r).toBe(v[0]);
    expect(v.g).toBe(v[1]);
    expect(v.b).toBe(v[2]);
    expect(v.a).toBe(v[3]);

    // ijkl
    expect(v.i).toBe(v[0]);
    expect(v.j).toBe(v[1]);
    expect(v.k).toBe(v[2]);
    expect(v.l).toBe(v[3]);

    // stuv
    expect(v.s).toBe(v[0]);
    expect(v.t).toBe(v[1]);
    expect(v.u).toBe(v[2]);
    expect(v.v).toBe(v[3]);

    v[1] = 6;
    expect(v.y).toBe(6);

    // &quot;swizzle&quot;
    const swizzled = v.swizzle(&apos;xxzy&apos;);
    expect(swizzled).toEqual([1, 1, 3, 6]);
  });

  it(&apos;should be possible to clone vector&apos;, () =&gt; {
    const v = vec2(-3, 2);
    const clone = v.clone();
    expect(clone).toEqual(v);
    expect(clone).not.toBe(v);
    v.x = 0;
    expect(v).toEqual([0, 2]);
    expect(clone).toEqual([-3, 2]);
  });

  it(&apos;should be mappable to float32 array&apos;, () =&gt; {
    const v = vec4(1.002, 2.3245, -3.6612, 4.3);
    const f = new Float32Array(v);
    expect(f).toBeInstanceOf(Float32Array);
    expect(f[0]).toBeCloseTo(1.002);
    expect(f[1]).toBeCloseTo(2.3245);
    expect(f[2]).toBeCloseTo(-3.6612);
    expect(f[3]).toBeCloseTo(4.3);
  });

  it(&apos;should be possible to add/subtract two vectors&apos;, () =&gt; {
    const v1 = vec2(-3, 2);
    const v2 = vec2(3, -7);
    expect(v1.add(v2)).toEqual([0, -5]);
    expect(v1).toEqual([0, -5]);

    v1.set(-3, 2);

    expect(v2.sub(v1)).toEqual([6, -9]);
  });

  it(&apos;should be possible to add/subtract a scaled version of a vector&apos;, () =&gt; {
    const v1 = vec2(-3, 2);
    const v2 = vec2(3, -7);
    expect(v1.add(v2)).toEqual([0, -5]);
    expect(v1).toEqual([0, -5]);

    v1.set(-3, 2);

    expect(v2.sub(v1)).toEqual([6, -9]);

    v2.set(3, -7);

    expect(v1.addScaled(v2, 0.5)).toEqual([-1.5, -1.5]);

    v1.set(-3, 2);

    expect(v1.subScaled(v2, 0.5)).toEqual([-4.5, 5.5]);

  });

  it(&apos;should be possible to add/subtract multiple vectors&apos;, () =&gt; {
    const vectors = [
      vec2(1, 4),
      vec2(-2, 0),
      vec2(7, -3),
    ];

    const v1 = vec2(-3, 2);
    expect(v1.add(...vectors)).toEqual([3, 3]);

    const v2 = vec2(-3, 2);
    expect(v2.sub(...vectors)).toEqual([-9, 1]);
  });

  it(&apos;should calculate the vector scalar (length)&apos;, () =&gt; {
    const v = vec2(-3, 2);
    expect(v.scalar()).toBeCloseTo(Math.sqrt(13));
  });

  it(&apos;should be able to scale vector&apos;, () =&gt; {
    const v = vec2(-3, 2);
    expect(v.scale(2)).toEqual([-6, 4]);
  });

  it(&apos;should be able to negate a vector&apos;, () =&gt; {
    const v = vec2(-3, 2);
    expect(v.negate()).toEqual([3, -2]);
  });

  it(&apos;should be able to calculate the psudo cross product of two 2d vectors&apos;, () =&gt; {
    const v = vec2(-3, 2);
    expect(v.cross2([1, 1])).toBe(-5);
  });

  it(&apos;should be able to calculate the distance between two vectors&apos;, () =&gt; {
    const v1 = vec2(-3, 2);
    const v2 = vec2(3, -7);
    expect(v1.distance(v2)).toBeCloseTo(10.8166538);
  });
});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
